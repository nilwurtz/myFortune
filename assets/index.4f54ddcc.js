var b=Object.defineProperty,F=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var g=(e,t,r)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,d=(e,t)=>{for(var r in t||(t={}))B.call(t,r)&&g(e,r,t[r]);if(y)for(var r of y(t))S.call(t,r)&&g(e,r,t[r]);return e},c=(e,t)=>F(e,C(t));import{j as w,a as A,F as G,b as f,l as E,y as h,p as M,D as j,S as D}from"./vendor.ec9af88a.js";const O=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function r(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerpolicy&&(l.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?l.credentials="include":s.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(s){if(s.ep)return;s.ep=!0;const l=r(s);fetch(s.href,l)}};O();const n=w,u=A,k=G,L=e=>u("span",{className:"text-sm text-gray-600",children:[u("span",{children:[e.year,"\u5E74"]}),u("span",{children:[e.month,"\u6708"]}),u("span",{children:[e.date,"\u65E5"]}),u("span",{children:["\uFF08",e.day,"\uFF09"]})]}),P=(e,t)=>e.greets.find(a=>a.part===t)===void 0?e:c(d({},e),{greets:e.greets.map(a=>a.part===t?c(d({},a),{greet:{elected:a.greet.elected+1}}):a)}),I=(e,t)=>e.greets.find(a=>a.part===t)===void 0?e:c(d({},e),{greets:e.greets.map(a=>a.part===t?c(d({},a),{greet:{elected:a.greet.elected!==0?a.greet.elected-1:0}}):a)}),i=(e,t)=>e.month===t.month&&e.month===t.month&&e.date===t.date,$=()=>{const{meets:e}=f(o);return n("div",{children:e.meets.map((t,r)=>n(T,d({},t),r))})},T=e=>u("div",{className:"mb-2 last:mb-0",children:[n("div",{className:"py-2",children:n(L,{year:e.date.year,month:e.date.month,day:e.date.day,date:e.date.date})}),n("div",{className:"flex flex-row",children:e.greets.map((t,r)=>n(_,d({date:e.date},t),r))})]}),_=e=>{const{selectedGreet:t,setSelectedGreet:r}=f(o),[a,s]=E(!1),l=()=>{t&&i(t,e.date)&&t.part===e.part?r(null):r(c(d({},e.date),{part:e.part}))};return h(()=>{t!==null&&i(t,e.date)&&t.part===e.part?s(!0):s(!1)},[t,e.part,e.date]),n("div",{className:`flex-1${a?" bg-gray-100":""}`,onClick:l,children:u("div",{className:"p-2",children:[u("div",{className:"text-sm text-gray-600",children:[e.part,"\u90E8"]}),u("div",{className:"mb-1 text-right",children:[n("span",{className:"text-xl",children:e.greet.elected}),n("span",{className:"ml-1 text-sm text-gray-600",children:"\u679A"})]})]})})},N={meets:[]},H=(e,t)=>{switch(t.type){case"add":return{meets:e.meets.map(r=>i(r.date,t.date)?P(r,t.part):r)};case"sub":return{meets:e.meets.map(r=>i(r.date,t.date)?I(r,t.part):r)};case"load":return t.state;case"init":return{meets:t.dates.map(r=>({date:r,greets:[{part:1,greet:{elected:0}},{part:2,greet:{elected:0}},{part:3,greet:{elected:0}},{part:4,greet:{elected:0}},{part:5,greet:{elected:0}},{part:6,greet:{elected:0}}]}))};default:return e}},J="My Fortune",x="myFortuneStorage",p={"4th":{nonParticipateMemberIds:[9,10],dates:[{year:2022,month:4,date:10,day:"\u65E5"},{year:2022,month:4,date:16,day:"\u571F"},{year:2022,month:4,date:17,day:"\u65E5"},{year:2022,month:4,date:29,day:"\u91D1"},{year:2022,month:5,date:7,day:"\u571F"},{year:2022,month:5,date:8,day:"\u65E5"}]}},K=(e,t)=>{const[r,a]=M(e,t);return h(()=>{try{const s=window.localStorage.getItem(x);if(s){const l=JSON.parse(s);if(l.meets.length===0)throw Error("initialMeetsState saved to localStorage");a({type:"load",state:l})}else a({type:"init",dates:p["4th"].dates})}catch(s){console.log(s),a({type:"init",dates:p["4th"].dates})}},[]),h(()=>{if(r.meets.length===0)return;const s=JSON.stringify(r);window.localStorage.setItem(x,s)},[r]),[r,a]},R=e=>n(v,{onClick:e.onClick,children:"+"}),Y=e=>n(v,{onClick:e.onClick,children:"-"}),v=e=>n("button",c(d({className:"h-10 w-20 flex items-center text-center justify-center rounded-xl bg-white text-teal-400 border-2 text-xl border-teal-400 font-bold"},e),{children:e.children})),q=()=>{const{selectedGreet:e,dispatch:t}=f(o);return e===null?null:n("div",{className:"w-screen px-4 py-2 bg-white border border-t h-16 drop-shadow-lg",children:n("div",{className:"flex flex-center justify-center h-full px-4",children:u("div",{className:"flex-1 max-w-xl flex flex-row justify-evenly items-center",children:[n("div",{children:n(R,{onClick:()=>t({type:"add",date:e,part:e.part})})}),n("div",{children:n(Y,{onClick:()=>t({type:"sub",date:e,part:e.part})})})]})})})},o=j({selectedGreet:null,setSelectedGreet:()=>{},meets:N,dispatch:()=>{}}),V=()=>{const[e,t]=K(H,N),[r,a]=E(null);return u(o.Provider,{value:{selectedGreet:r,setSelectedGreet:a,meets:e,dispatch:t},children:[n("div",{className:"px-2",children:n("div",{className:"flex flex-center justify-center",children:u("div",{className:"flex-1 max-w-xl",children:[n("div",{className:"py-4",children:u("small",{children:["\u8A72\u5F53\u306E\u90E8\u3092\u9078\u629E\u3057\u3001+\u3001-\u3067\u679A\u6570\u3092\u5909\u66F4\u3057\u307E\u3059\u3002\u5909\u66F4\u3059\u308B\u305F\u3073\u3001\u30C7\u30FC\u30BF\u304C\u4FDD\u5B58\u3055\u308C\u307E\u3059\u3002",n("br",{}),"\u3053\u306E\u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u306E\u30C7\u30FC\u30BF\u306F\u4ECA\u95B2\u89A7\u4E2D\u306E\u30D6\u30E9\u30A6\u30B6\u5185\u306B\u4FDD\u5B58\u3055\u308C\u3001\u7B2C\u4E09\u8005\u306B\u9001\u4FE1\u3055\u308C\u308B\u3053\u3068\u306F\u3042\u308A\u307E\u305B\u3093\u3002"]})}),n($,{})]})})}),n("div",{className:"fixed bottom-0 right-0 left-0",children:n(q,{})})]})},z=e=>n("header",{children:n("div",{className:"px-4 py-2 bg-teal-400 drop-shadow-lg",children:n("h1",{className:"text-white font-semibold",children:e.title})})}),Q=()=>n("footer",{children:n("div",{className:"py-8 mx-auto bg-gray-100 flex justify-center",children:n("div",{className:"contents",children:u("small",{className:"text-gray-400",children:["created by ",n("a",{className:"text-blue-300",children:"@apollo46g"})]})})})}),U=e=>n("main",{className:"min-h-screen",children:e.children}),W=()=>u(k,{children:[n(z,{title:J}),n(U,{children:n(V,{})}),n(Q,{})]});D(n(W,{}),document.getElementById("app"));
